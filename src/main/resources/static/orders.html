<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Orders - Handloom Fashion</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #e0f7fa;
            color: #333;
        }
        header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #add8e6; /* Light blue background */
            color: white;
        }
        header .logo {
            font-size: 24px;
            font-weight: bold;
        }
        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 0;
            padding: 0;
        }
        nav a {
            color: white;
            text-decoration: none;
        }
        .header-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .btn {
            background: #ff4081;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            text-decoration: none;
        }
        .order-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #ffffff;
            border-radius: 5px;
        }
        .order-container h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        .order-items {
            list-style: none;
            padding: 0;
        }
        .order-items li {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid #ccc;
            padding: 10px 0;
        }
        .order-items li:last-child {
            border-bottom: none;
        }
        footer {
            text-align: center;
            padding: 0.1px;
            background: #add8e6; /* Light blue background */
            color: #333; /* Darker text for better contrast */
            position: fixed;
            width: 100%;
            bottom: 0;
        }
    </style>
</head>
<body>

<header>
	<div class="logo"><a href="index.html">Handlooms</a></div>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="artisans.html">Artisans</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="cart.html" id="cart-link">Cart</a></li>
            <li><a href="orders.html" id="orders-link">Orders</a></li>
        </ul>
    </nav>
    <div class="header-links">
		<a href="logout.html" class="btn">LogOut</a>
    </div>
</header>

<main>
    <div class="order-container">
        <h2>Your Orders</h2>
        <ul class="order-items" id="order-items">
            <!-- Order items will be populated here -->
        </ul>
        <p><strong>Total: <span id="order-total">$0</span></strong></p>
    </div>
</main>

<footer>
    <p>&copy; 2024 Handloom Fashion. All rights reserved.</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Add event listener for the "Pay Now" button
    const payButton = document.getElementById('pay-button');
    if (payButton) {
        payButton.addEventListener('click', handlePayment);
    }
});

/**
 * Function to handle Razorpay payment integration.
 */
function handlePayment() {
    // Get the total price from the cart (convert it to paise)
    const totalPriceElement = document.getElementById('total-price');
    if (!totalPriceElement) {
        alert("Total price not found!");
        return;
    }

    const totalPrice = parseFloat(totalPriceElement.textContent.replace('$', '')) * 100; // Convert to paise
    if (isNaN(totalPrice) || totalPrice <= 0) {
        alert("Invalid total price!");
        return;
    }

    // Razorpay payment options
    const options = {
        key: "LIVE_KEY_ID", // Replace this with your actual Live Razorpay Key ID
        amount: totalPrice,
        currency: "INR",
        name: "Handloom Fashion",
        description: "Purchase Handloom Items",
        image: "/logo.png", // Optional logo URL
        callback_url: "https://yourdomain.com/payment/confirm", // Replace with your live backend callback URL
        prefill: {
            name: "Customer Name", // Replace with actual customer data if available
            email: "customer@example.com" // Replace with actual customer email
        },
        theme: {
            color: "#6a1b9a"
        },
        handler: function (response) {
            // Payment success handler
            alert(`Payment Successful!\nPayment ID: ${response.razorpay_payment_id}`);
            // Optionally, redirect to a confirmation page or update your UI
            window.location.href = '/confirmation.html';
        },
        modal: {
            ondismiss: function () {
                // Handle if user closes the payment modal
                alert("Payment process was cancelled.");
            }
        }
    };

    // Initialize and open Razorpay payment gateway
    const rzp = new Razorpay(options);
    rzp.on('payment.failed', function (response) {
        // Payment failure handler
        alert(`Payment Failed!\nReason: ${response.error.description}`);
    });
    rzp.open();
}

</script>

</body>
</html>
